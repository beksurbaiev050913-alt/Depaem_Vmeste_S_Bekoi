<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Vegas_Kazik</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle at top,#3a005f,#000);
  color:#fff;
  text-align:center;
}

h1{color:#ff5cff}

button{
  padding:6px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin:3px;
}

nav button{background:#00eaff;color:#000}

.case{
  display:inline-block;
  background:#222;
  padding:15px;
  border-radius:15px;
  margin:10px;
  width:150px;
}

.item{
  display:inline-block;
  width:170px;
  margin:8px;
  padding:10px;
  border-radius:15px;
}

.blue{background:#3498db}
.epic{background:#9b59b6}
.mythic{background:#e67e22}
.legend{background:#f1c40f;color:#000}

.hidden{display:none}

#roulette{
  margin-top:20px;
  height:80px;
  overflow:hidden;
}

.roll{
  display:flex;
  justify-content:center;
  animation: spin 1.5s ease-out forwards;
}

.roll .item{
  margin:0 5px;
}

@keyframes spin{
  from{transform:translateX(-400px)}
  to{transform:translateX(0)}
}
</style>
</head>

<body>

<h1>Бека депает — и ты депай!</h1>
<div>
  Баланс: <b id="cc">2000</b> CC |
  Пыль: <b id="dust">0</b>
</div>

<nav>
  <button onclick="show('cases')">Кейсы</button>
  <button onclick="show('inv')">Мои герои</button>
</nav>

<div id="cases">
  <div class="case">
    <b>Новичок</b><br>100 CC<br>
    <button onclick="openCase('starter')">Открыть</button>
  </div>

  <div class="case">
    <b>Стандарт</b><br>300 CC<br>
    <button onclick="openCase('standard')">Открыть</button>
  </div>

  <div class="case">
    <b>Дубай</b><br>600 CC<br>
    <button onclick="openCase('dubai')">Открыть</button>
  </div>

  <div class="case">
    <b>Пыльный</b><br>5000 пыли<br>
    <button onclick="openCase('dusty')">Открыть</button>
  </div>
</div>

<div id="roulette" class="hidden"></div>
<div id="inv" class="hidden"></div>

<script>
let cc = Number(localStorage.getItem("cc")) || 2000;
let dust = Number(localStorage.getItem("dust")) || 0;
let inventory = JSON.parse(localStorage.getItem("inv")) || [];

const prices = {
  starter:{cc:100},
  standard:{cc:300},
  dubai:{cc:600},
  dusty:{dust:5000}
};

const loot = {
  starter:[
    {n:"Книга",r:"blue",p:100,d:90},
    {n:"Шапка",r:"epic",p:300,d:370}
  ],
  standard:[
    {n:"Кроссовок",r:"epic",p:370,d:370},
    {n:"Остров",r:"mythic",p:780,d:780}
  ],
  dubai:[
    {n:"Квартира Бишкек",r:"mythic",p:780,d:780},
    {n:"Золотая медаль",r:"legend",p:1100,d:1300}
  ],
  dusty:[
    {n:"Золотая чаша",r:"legend",p:11600},
    {n:"Золотая медаль",r:"legend",p:11600},
    {n:"Золотая кепка Беки",r:"legend",p:11600},
    {n:"Золотой клык",r:"legend",p:11600},
    {n:"Галстук Беки",r:"legend",p:11600},
    {n:"Серебряный кроссовок",r:"mythic",p:3500},
    {n:"Кроссовок",r:"mythic",p:3500},
    {n:"Книга по математике",r:"mythic",p:3500},
    {n:"Шаурма",r:"mythic",p:3500},
    {n:"Квартира в центре Бишкека",r:"mythic",p:3500}
  ]
};

function save(){
  localStorage.setItem("cc",cc);
  localStorage.setItem("dust",dust);
  localStorage.setItem("inv",JSON.stringify(inventory));
  document.getElementById("cc").innerText=cc;
  document.getElementById("dust").innerText=dust;
}

function show(id){
  ["cases","inv","roulette"].forEach(x=>{
    document.getElementById(x).classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");
  if(id==="inv") renderInv();
}

function openCase(type){
  let price = prices[type];
  if(price.cc && cc < price.cc) return alert("Недостаточно CC");
  if(price.dust && dust < price.dust) return alert("Недостаточно пыли");

  if(price.cc) cc -= price.cc;
  if(price.dust) dust -= price.dust;
  save();

  show("roulette");
  let r = document.getElementById("roulette");
  r.innerHTML = "<div class='roll'></div>";
  let roll = r.firstChild;

  let pool = loot[type];
  let real = pool[Math.floor(Math.random()*pool.length)];

  for(let i=0;i<8;i++){
    let fake = pool[Math.floor(Math.random()*pool.length)];
    roll.innerHTML += `<div class="item ${fake.r}">${fake.n}</div>`;
  }
  roll.innerHTML += `<div class="item ${real.r}"><b>${real.n}</b></div>`;

  setTimeout(()=>{
    inventory.push(real);
    save();
    alert("Ты выбил: "+real.n);
    show("inv");
  },1500);
}

function renderInv(){
  let div = document.getElementById("inv");
  div.innerHTML="";
  inventory.forEach((it,i)=>{
    let d=document.createElement("div");
    d.className="item "+it.r;
    d.innerHTML=`<b>${it.n}</b><br>${it.p} CC<br>`;
    let s=document.createElement("button");
    s.innerText="Продать";
    s.onclick=()=>{cc+=it.p;inventory.splice(i,1);save();renderInv();};
    let dis=document.createElement("button");
    dis.innerText="Распылить";
    dis.onclick=()=>{dust+=(it.d||0);inventory.splice(i,1);save();renderInv();};
    d.appendChild(s);
    d.appendChild(dis);
    div.appendChild(d);
  });
}

save();
</script>
</body>
</html>
