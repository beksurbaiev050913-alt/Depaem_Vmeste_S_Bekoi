<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Кейсы Беки</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle at top,#3a005f,#000);
  color:#fff;
  text-align:center;
}

h1{color:#ff5cff}

button{
  padding:6px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin:3px;
}

nav button{background:#00eaff;color:#000}

.case{
  display:inline-block;
  background:#222;
  padding:15px;
  border-radius:15px;
  margin:10px;
  width:140px;
}

.item{
  display:inline-block;
  width:160px;
  margin:8px;
  padding:10px;
  border-radius:15px;
}

.blue{background:#3498db}
.epic{background:#9b59b6}
.mythic{background:#e67e22}
.legend{background:#f1c40f;color:#000}

.hidden{display:none}
</style>
</head>

<body>

<h1>Бека депает — и ты депай!</h1>
<div>
  Баланс: <b id="cc">2000</b> CC |
  Пыль: <b id="dust">0</b>
</div>

<nav>
  <button onclick="show('cases')">Кейсы</button>
  <button onclick="show('inv')">Мои герои</button>
</nav>

<!-- КЕЙСЫ -->
<div id="cases">
  <div class="case">
    <b>Новичок</b><br>100 CC<br>
    <button onclick="openCase('starter')">Открыть</button>
  </div>

  <div class="case">
    <b>Стандарт</b><br>300 CC<br>
    <button onclick="openCase('standard')">Открыть</button>
  </div>

  <div class="case">
    <b>Дубай</b><br>600 CC<br>
    <button onclick="openCase('dubai')">Открыть</button>
  </div>

  <div class="case">
    <b>Пыльный</b><br>5000 пыли<br>
    <button onclick="openCase('dusty')">Открыть</button>
  </div>
</div>

<!-- ИНВЕНТАРЬ -->
<div id="inv" class="hidden"></div>

<script>
let cc = Number(localStorage.getItem("cc")) || 2000;
let dust = Number(localStorage.getItem("dust")) || 0;
let inventory = JSON.parse(localStorage.getItem("inv")) || [];

const prices = {
  starter:{cc:100},
  standard:{cc:300},
  dubai:{cc:600},
  dusty:{dust:5000}
};

const loot = {
  starter:[
    {n:"Книга",r:"blue",p:100,d:90},
    {n:"Шапка",r:"epic",p:300,d:370}
  ],
  standard:[
    {n:"Кроссовок",r:"epic",p:370,d:370},
    {n:"Остров",r:"mythic",p:780,d:780}
  ],
  dubai:[
    {n:"Золотая медаль",r:"legend",p:1100,d:1300},
    {n:"Квартира Бишкек",r:"mythic",p:780,d:780}
  ],
  dusty:[
    {n:"Золотая чаша",r:"legend",p:11600},
    {n:"Золотая медаль",r:"legend",p:11600},
    {n:"Золотая кепка Беки",r:"legend",p:11600},
    {n:"Золотой клык",r:"legend",p:11600},
    {n:"Галстук Беки",r:"legend",p:11600},
    {n:"Серебряный кроссовок",r:"mythic",p:3500},
    {n:"Кроссовок",r:"mythic",p:3500},
    {n:"Книга по математике",r:"mythic",p:3500},
    {n:"Шаурма",r:"mythic",p:3500},
    {n:"Квартира в центре Бишкека",r:"mythic",p:3500}
  ]
};

function save(){
  localStorage.setItem("cc",cc);
  localStorage.setItem("dust",dust);
  localStorage.setItem("inv",JSON.stringify(inventory));
  document.getElementById("cc").innerText=cc;
  document.getElementById("dust").innerText=dust;
}

function show(id){
  document.getElementById("cases").classList.add("hidden");
  document.getElementById("inv").classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
  renderInv();
}

function openCase(type){
  let price = prices[type];

  if(price.cc && cc < price.cc) return alert("Недостаточно CC");
  if(price.dust && dust < price.dust) return alert("Недостаточно пыли");

  if(price.cc) cc -= price.cc;
  if(price.dust) dust -= price.dust;

  let pool = loot[type];
  let item = pool[Math.floor(Math.random()*pool.length)];
  inventory.push(item);

  save();
  alert("Ты выбил: "+item.n);
}

function renderInv(){
  let div = document.getElementById("inv");
  div.innerHTML="";

  inventory.forEach((it,i)=>{
    let d = document.createElement("div");
    d.className="item "+it.r;
    d.innerHTML=`<b>${it.n}</b><br>${it.p} CC<br>`;

    let sell = document.createElement("button");
    sell.innerText="Продать";
    sell.onclick=()=>{
      cc+=it.p;
      inventory.splice(i,1);
      save(); renderInv();
    };

    let dis = document.createElement("button");
    dis.innerText="Распылить";
    dis.onclick=()=>{
      dust+=(it.d||0);
      inventory.splice(i,1);
      save(); renderInv();
    };

    d.appendChild(sell);
    d.appendChild(dis);
    div.appendChild(d);
  });
}

save();
</script>
</body>
</html>
